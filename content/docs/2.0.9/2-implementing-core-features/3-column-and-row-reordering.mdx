---
posttype: "docs"
title: Column and row reordering
metaTitle: "Column and row reordering"
metaDescription: "metaDescription"
---

## How to implement column and row reordering?

This lesson is based on [getting started](link).

1. Firstly lets update imports by ading [`Id`](link), [`DropPosition`](link), [`Column`](link), [`Row`](link), [`Cell`](link)

```tsx
import { ReactGrid, Id, DropPosition, Column, Row, Cell } from "@silevis/reactgrid";
```

2. Prepare our app state to allow row and column reorder:

Mark column as reorderable by adding `reorderable` attribute and set it to `true`.

```tsx
columns: [
	// columns now are able to reorder
	{ columnId: "Name", width: 100, reorderable: true }, //highlight-line
	{ columnId: "Surname", width: 100, reorderable: true } //highlight-line
],
```

Mark rows as reorderable by adding `reorderable` attribute and set it to `true`. 
Notice that first object on `rows` array will stay unorderable because it's data header.

```tsx
rows: [
	{
		rowId: 0,
		cells: [
			{ type: "header", text: "Name" },
			{ type: "header", text: "Surname" }
		]
	},
	{
		rowId: 1,
		reorderable: true, //highlight-line
		cells: [
			{ type: "text", text: "Thomas" },
			{ type: "text", text: "Goldman" }
		]
	},
	{
		rowId: 2,
		reorderable: true, //highlight-line
		cells: [
			{ type: "text", text: "Susie" },
			{ type: "text", text: "Spencer" }
		]
	},
	{
		rowId: 3,
		reorderable: true, //highlight-line
		cells: [
			{ type: "text", text: "" }, 
			{ type: "text", text: "" }
		]
	}
]
```

3. Column and rows handlers implementation

```tsx
const handleColumnsReordered = (targetColumnId: Id, columnIds: Id[], dropPosition: DropPosition) => {
	const to = state.columns.findIndex((column: Column) => column.columnId === targetColumnId);
	const columnIdxs = columnIds.map((id: Id, idx: number) => state.columns.findIndex((c: Column) => c.columnId === id));
	setState({
		columns: reorderArray<Column>(state.columns, columnIdxs, to),
		rows: state.rows.map(row => ({ ...row, cells: reorderArray<Cell>(row.cells, columnIdxs, to) })),
	});
}

const handleRowsReordered = (targetRowId: Id, rowIds: Id[], dropPosition: DropPosition) => {
	const newState = { ...state };
	const to = state.rows.findIndex((row: Row) => row.rowId === targetRowId);
	const ids = rowIds.map((id: Id) => state.rows.findIndex(r => r.rowId === id)) as number[];
	setState({ ...newState, rows: reorderArray<Row>(state.rows, ids, to) });
}
```

4. Add helper function that helps change order of elements in array

```tsx
const reorderArray = <T extends {}>(arr: T[], idxs: number[], to: number) => {
	const movedElements: T[] = arr.filter((_: T, idx: number) => idxs.includes(idx));
	to = Math.min(...idxs) < to ? to += 1 : to -= idxs.filter(idx => idx < to).length;
	const leftSide: T[] = arr.filter((_: T, idx: number) => idx < to && !idxs.includes(idx));
	const rightSide: T[] = arr.filter((_: T, idx: number) => idx >= to && !idxs.includes(idx));
	return [...leftSide, ...movedElements, ...rightSide];
}
```

5. Update `ReactGrid` component by adding appropriate. You also have to enable column and row selection.

```tsx
return (
	<ReactGrid
		rows={state.rows}
		columns={state.columns}
		license={"non-commercial"}
		onColumnsReordered={handleColumnsReordered} // highlight-line
		onRowsReordered={handleRowsReordered} // highlight-line
		enableRowSelection // highlight-line
      	enableColumnSelection // highlight-line
	/>
);
```

## Result

<iframe
	src="https://codesandbox.io/embed/reactgrid-getting-started-4x3xc?fontsize=14&hidenavigation=1&theme=dark"
	style="width:100%; height:250px; border:0; border-radius: 4px; overflow:hidden;"
	title="reactgrid-columns-and-rows-reorder"
	allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"
	sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
></iframe>